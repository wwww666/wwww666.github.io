---
layout:     post
title:      二维数组前缀和
subtitle:    二维数组前缀和
date:       2021-02-25
author:     wzk
header-img: img/home-bg-o.jpg
catalog: true
tags:
    - 算法
---

## 前言

每日学习总结记录



>关键词：算法

### 二维数组前缀和
二维前缀和用于计算在矩阵中的任意一个矩形中数字之和。在了解二维前缀和之前，我们首先需要了解一下什么是前缀和。
如果有一串长度为n的数列a1,a2,a3,.....an，再给出m个询问，每次询问给出L，R两个数，要求给出区间[L,R]里的数
的和。我们首先想到的就是遍历一遍它给的区间，计算出答案，但是这样的时间复杂度达到O(n*n),如果数据量大的话，很
可能会超时，如果使用前缀和的方法来做能够将时间复杂度降到O(n+m),方法例如下面代码：
```
#python3
a[0]=0
for i in range(1,n+1):
	a[i]+=a[i-1]

#java
a[0]=0;
for(int i=1; i<=n;i++){
	a[i]+=a[i-1];
}
```  
前缀和顾名思义就是前面i个数的总和，数组a在经过这样的操作之后，对于每次的询问，我们只需要计算a[R]-a[L-1]就能
得到我们想要的答案。在了解了简单的前缀和之后。我们再来看二维数组前缀和。
给定一个n*m大小的矩阵a，有q次询问，每次询问给定x1,x2,y1,y2四个数，求以(x1,y1)为左上角坐标和(x2,y2)为右下角
坐标的子矩阵的所有元素和（包含两个角坐标）,例如下图：
![image](img/post-bg-er.png)
我们每次要求的就是红色区域，对比上图我们可以发现，红色区域的值等于四个区域的值减去（蓝色区域+白色区域），再减去
（蓝色区域+黄色区域），因为蓝色区域被剪去两次所以需要在加回来。那么我们的公示就是：
```
ans=a[x2][y2]-a[x1-1][y2]-a[x2][y1-1]+a[x1-1][y1-1]
```
a数组每个值代表前缀和，用代码来写就是：
```
#python3
for i in range(1,n+1):
	for j in range(1，m+1):
		a[i][j]+=a[i][j-1]+a[i-1][j]-a[i-1][j-1]

#java
for(int i=1;i<=n;i++){
    for(int j=1;j<=m;j++)
    a[i][j]+=a[i][j-1]+a[i-1][j]-a[i-1][j-1];
}
```
到此，二维矩阵前缀和也求完了。如果有任何不懂或本人有描述错误的地方，请联系我，我们一起探讨。





 

